<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pronomen â€“ Lernspiel</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,400&display=swap');

  :root {
    --bg:        #0f1117;
    --surface:   #1a1d27;
    --surface2:  #232838;
    --border:    #2e3345;
    --text:      #e8eaf0;
    --text-dim:  #6e7280;
    --accent:    #7dd3a8;
    --accent2:   #5eacd4;
    --warn:      #f0836a;
    --gold:      #f0c96a;

    --cat-personal:      #5eacd4;
    --cat-reflexiv:      #7dd3a8;
    --cat-possessiv:     #d4a85e;
    --cat-demonstrativ:  #c45ed4;
    --cat-interrogativ:  #d45e8a;
    --cat-relativ:       #5ed4c4;
    --cat-indefinit:     #a87dd3;
  }

  * { margin:0; padding:0; box-sizing:border-box; }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* â”€â”€â”€ ambient grain â”€â”€â”€ */
  body::before {
    content:'';
    position:fixed; inset:0;
    background: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.035'/%3E%3C/svg%3E");
    pointer-events:none; z-index:999;
  }

  /* â”€â”€â”€ header â”€â”€â”€ */
  header {
    text-align:center;
    padding: 48px 20px 20px;
    position:relative; z-index:1;
  }
  header h1 {
    font-family:'Syne', sans-serif;
    font-weight:800; font-size: clamp(2rem,5vw,3.2rem);
    letter-spacing:-1px;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  header p {
    color: var(--text-dim);
    margin-top:8px; font-size:0.95rem;
  }

  /* â”€â”€â”€ scoreboard â”€â”€â”€ */
  .scoreboard {
    display:flex; justify-content:center; gap:32px;
    margin: 18px auto; max-width:480px;
  }
  .score-box {
    background:var(--surface); border:1px solid var(--border);
    border-radius:12px; padding:10px 22px; text-align:center;
    min-width:100px;
  }
  .score-box .label { font-size:0.72rem; text-transform:uppercase; letter-spacing:1.5px; color:var(--text-dim); }
  .score-box .value { font-family:'Syne',sans-serif; font-size:1.6rem; font-weight:700; margin-top:2px; }
  .score-box.correct .value { color: var(--accent); }
  .score-box.wrong   .value { color: var(--warn); }
  .score-box.total   .value { color: var(--gold); }

  /* â”€â”€â”€ progress bar â”€â”€â”€ */
  .progress-wrap {
    max-width:700px; margin:0 auto 28px; padding:0 20px;
  }
  .progress-bg {
    height:6px; background:var(--surface2); border-radius:99px; overflow:hidden;
  }
  .progress-fill {
    height:100%; width:0%; background:linear-gradient(90deg, var(--accent), var(--accent2));
    border-radius:99px; transition:width .4s ease;
  }

  /* â”€â”€â”€ word chip (draggable) â”€â”€â”€ */
  .chip-area {
    display:flex; flex-wrap:wrap; justify-content:center;
    gap:10px; padding:20px 24px; min-height:72px;
    max-width:760px; margin:0 auto;
  }
  .chip {
    background:var(--surface); border:1px solid var(--border);
    border-radius:10px; padding:9px 20px;
    font-size:1rem; font-weight:500;
    cursor:grab; user-select:none;
    transition: transform .15s, box-shadow .15s, border-color .2s;
    position:relative; z-index:2;
  }
  .chip:hover { border-color:var(--accent2); box-shadow:0 2px 12px rgba(94,172,212,.25); }
  .chip.dragging { opacity:.5; transform:scale(1.08); cursor:grabbing; }
  .chip.placed   { opacity:.4; pointer-events:none; }

  /* â”€â”€â”€ category drop zones â”€â”€â”€ */
  .categories {
    display:grid;
    grid-template-columns: repeat(auto-fill, minmax(180px,1fr));
    gap:14px;
    max-width:900px; margin:24px auto 0; padding:0 20px 40px;
  }
  .cat-zone {
    background:var(--surface);
    border:2px dashed var(--border);
    border-radius:16px;
    padding:14px 12px 12px;
    min-height:140px;
    transition: border-color .25s, background .25s;
    position:relative;
  }
  .cat-zone.drag-over {
    border-color:var(--accent);
    background: rgba(125,211,168,.06);
  }
  .cat-zone .cat-title {
    font-family:'Syne',sans-serif;
    font-size:.78rem; font-weight:700;
    text-transform:uppercase; letter-spacing:1px;
    margin-bottom:10px;
    display:flex; align-items:center; gap:7px;
  }
  .cat-zone .cat-dot {
    display:inline-block; width:10px; height:10px; border-radius:50%;
  }
  .cat-zone .dropped-chips {
    display:flex; flex-wrap:wrap; gap:6px; min-height:32px;
  }
  .dropped-chip {
    border-radius:8px; padding:5px 12px; font-size:.88rem; font-weight:500;
    border:1px solid transparent;
  }
  .dropped-chip.correct {
    background: rgba(125,211,168,.15);
    border-color: var(--accent);
    color: var(--accent);
  }
  .dropped-chip.wrong {
    background: rgba(240,131,106,.15);
    border-color: var(--warn);
    color: var(--warn);
    animation: shake .35s ease;
  }
  @keyframes shake {
    0%,100%{ transform:translateX(0); }
    25%   { transform:translateX(-6px); }
    75%   { transform:translateX(6px); }
  }

  /* â”€â”€â”€ touch fallback: tap-to-select flow â”€â”€â”€ */
  .chip.selected {
    border-color: var(--gold);
    box-shadow: 0 0 0 2px var(--gold);
    background: var(--surface2);
  }
  .cat-zone.tap-target {
    cursor:pointer;
  }

  /* â”€â”€â”€ info legend (collapsed) â”€â”€â”€ */
  .legend-toggle {
    display:block; margin:0 auto 10px;
    background:none; border:1px solid var(--border);
    color:var(--text-dim); border-radius:8px;
    padding:6px 18px; font-size:.82rem; cursor:pointer;
    transition:border-color .2s;
  }
  .legend-toggle:hover { border-color:var(--accent2); color:var(--text); }
  .legend {
    max-width:700px; margin:0 auto 18px;
    background:var(--surface); border:1px solid var(--border);
    border-radius:14px; padding:18px 22px;
    display:none; font-size:.88rem; line-height:1.6;
    color:var(--text-dim);
  }
  .legend.open { display:block; }
  .legend h3 { font-family:'Syne',sans-serif; color:var(--text); margin-bottom:8px; font-size:.95rem; }
  .legend-row { display:flex; align-items:flex-start; gap:10px; margin-bottom:6px; }
  .legend-row .legend-dot { min-width:12px; height:12px; border-radius:50%; margin-top:4px; }
  .legend-row strong { color:var(--text); }

  /* â”€â”€â”€ modal / end screen â”€â”€â”€ */
  .modal-overlay {
    position:fixed; inset:0; background:rgba(0,0,0,.7);
    display:none; align-items:center; justify-content:center;
    z-index:100;
  }
  .modal-overlay.show { display:flex; }
  .modal {
    background:var(--surface); border:1px solid var(--border);
    border-radius:24px; padding:44px 40px; max-width:460px; width:90%;
    text-align:center; position:relative;
  }
  .modal h2 { font-family:'Syne',sans-serif; font-size:1.8rem; margin-bottom:10px; }
  .modal .modal-score { font-size:3rem; font-family:'Syne',sans-serif; font-weight:800; color:var(--gold); }
  .modal p { color:var(--text-dim); margin:8px 0; }
  .modal button {
    margin-top:20px; background:linear-gradient(135deg, var(--accent), var(--accent2));
    color:#0f1117; border:none; border-radius:10px;
    padding:12px 32px; font-size:1rem; font-weight:600;
    cursor:pointer; font-family:'DM Sans',sans-serif;
    transition:filter .2s;
  }
  .modal button:hover { filter:brightness(1.15); }

  /* â”€â”€â”€ mobile tweak â”€â”€â”€ */
  @media(max-width:500px){
    .categories { grid-template-columns:1fr 1fr; }
    .scoreboard { gap:14px; }
    .score-box { padding:8px 14px; min-width:72px; }
  }
</style>
</head>
<body>

<!-- â”€â”€ Header â”€â”€ -->
<header>
  <h1>Pronomen Sortieren</h1>
  <p>Ordne jedes Wort der richtigen Pronomenkategorie zu</p>
</header>

<!-- â”€â”€ Scoreboard â”€â”€ -->
<div class="scoreboard">
  <div class="score-box correct"><div class="label">Richtig</div><div class="value" id="scoreCorrect">0</div></div>
  <div class="score-box wrong">  <div class="label">Falsch</div> <div class="value" id="scoreWrong">0</div></div>
  <div class="score-box total">  <div class="label">Gesamt</div><div class="value" id="scoreTotal">0</div></div>
</div>

<!-- â”€â”€ Progress â”€â”€ -->
<div class="progress-wrap"><div class="progress-bg"><div class="progress-fill" id="progressFill"></div></div></div>

<!-- â”€â”€ Info Legend â”€â”€ -->
<button class="legend-toggle" onclick="document.getElementById('legend').classList.toggle('open')">â„¹ Kategorie-Ãœbersicht</button>
<div class="legend" id="legend">
  <h3>Was bedeutet was?</h3>
  <div class="legend-row"><span class="legend-dot" style="background:var(--cat-personal)"></span><div><strong>Personalpronomen</strong> â€“ ich, du, er, sie, es, wir, ihr / auch Dativ & Akkusativ (mir, mich â€¦)</div></div>
  <div class="legend-row"><span class="legend-dot" style="background:var(--cat-reflexiv)"></span><div><strong>Reflexivpronomen</strong> â€“ sich, einander (drÃ¼cken eine RÃ¼ckbeziehung auf das Subjekt aus)</div></div>
  <div class="legend-row"><span class="legend-dot" style="background:var(--cat-possessiv)"></span><div><strong>Possessivpronomen</strong> â€“ mein, dein, sein, ihr, unser, euer (zeigen Besitz an)</div></div>
  <div class="legend-row"><span class="legend-dot" style="background:var(--cat-demonstrativ)"></span><div><strong>Demonstrativpronomen</strong> â€“ dieser, jener, derselbe, solcher (zeigen auf etwas Bestimmtes)</div></div>
  <div class="legend-row"><span class="legend-dot" style="background:var(--cat-interrogativ)"></span><div><strong>Interrogativpronomen</strong> â€“ wer, was, welcher (stellen Fragen)</div></div>
  <div class="legend-row"><span class="legend-dot" style="background:var(--cat-relativ)"></span><div><strong>Relativpronomen</strong> â€“ der, die, das, welcher (verbinden einen Nebensatz)</div></div>
  <div class="legend-row"><span class="legend-dot" style="background:var(--cat-indefinit)"></span><div><strong>Indefinitpronomen</strong> â€“ einige, manche, alle, jemand, nichts â€¦ (unbestimmt)</div></div>
</div>

<!-- â”€â”€ Chips (words to sort) â”€â”€ -->
<div class="chip-area" id="chipArea"></div>

<!-- â”€â”€ Drop Zones â”€â”€ -->
<div class="categories" id="categoriesWrap"></div>

<!-- â”€â”€ End Modal â”€â”€ -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal">
    <h2>GlÃ¼ckwunsch ðŸŽ‰</h2>
    <div class="modal-score" id="modalScore">â€“</div>
    <p id="modalMsg">Du hast alle Pronomen sortiert!</p>
    <button onclick="restartGame()">Noch einmal spielen</button>
  </div>
</div>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  GAME DATA  (aus den Screenshots)
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const CATEGORIES = [
  { id:'personal',      label:'Personalpronomen',      color:'var(--cat-personal)',      words:['ich','du','wir','ihr','er','sie','es','mir','dir','uns','euch','ihm','ihn','mich','dich'] },
  { id:'reflexiv',      label:'Reflexivpronomen',      color:'var(--cat-reflexiv)',      words:['sich','einander'] },
  { id:'possessiv',     label:'Possessivpronomen',     color:'var(--cat-possessiv)',     words:['mein','dein','unser','euer','sein','ihr'] },
  { id:'demonstrativ',  label:'Demonstrativpronomen',  color:'var(--cat-demonstrativ)',  words:['dieser','jener','derselbe','derjenige','solcher'] },
  { id:'interrogativ',  label:'Interrogativpronomen',  color:'var(--cat-interrogativ)',  words:['wer','was','welcher','was fÃ¼r'] },
  { id:'relativ',       label:'Relativpronomen',       color:'var(--cat-relativ)',       words:['der','die','das'] },  // in context "Relativpronomen"
  { id:'indefinit',     label:'Indefinitpronomen',     color:'var(--cat-indefinit)',     words:['einige','etliche','manche','allerlei','mancherlei','dreierlei','man','jedermann','jemand','niemand','nichts','etwas','irgendein','irgendwelche','kein','alle','sÃ¤mtliche','beide','ein bisschen','ein wenig','ein paar','genug'] }
];

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  BUILD a shuffled ROUND  â€” pick N words per cat
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const PER_CAT = { personal:5, reflexiv:2, possessiv:4, demonstrativ:3, interrogativ:3, relativ:3, indefinit:5 };

let roundWords = []; // { word, catId }
let placed = new Set();
let scoreC = 0, scoreW = 0;

function shuffle(arr){ return arr.sort(()=>Math.random()-.5); }

function pick(arr, n){ return shuffle([...arr]).slice(0, Math.min(n, arr.length)); }

function buildRound(){
  roundWords = [];
  CATEGORIES.forEach(cat=>{
    const n = PER_CAT[cat.id] || 3;
    pick(cat.words, n).forEach(w=>{ roundWords.push({ word:w, catId:cat.id }); });
  });
  roundWords = shuffle(roundWords);
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  RENDER
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function render(){
  const chipArea = document.getElementById('chipArea');
  chipArea.innerHTML = '';
  roundWords.forEach((item,i)=>{
    const chip = document.createElement('div');
    chip.className = 'chip';
    chip.dataset.index = i;
    chip.dataset.word = item.word;
    chip.dataset.catId = item.catId;
    chip.textContent = item.word;
    chip.setAttribute('draggable','true');
    // drag events
    chip.addEventListener('dragstart', onDragStart);
    chip.addEventListener('dragend',   onDragEnd);
    // tap (mobile)
    chip.addEventListener('click',     onChipClick);
    chipArea.appendChild(chip);
  });

  const wrap = document.getElementById('categoriesWrap');
  wrap.innerHTML = '';
  CATEGORIES.forEach(cat=>{
    const zone = document.createElement('div');
    zone.className = 'cat-zone';
    zone.dataset.catId = cat.id;
    zone.innerHTML = `
      <div class="cat-title">
        <span class="cat-dot" style="background:${cat.color}"></span>
        ${cat.label}
      </div>
      <div class="dropped-chips"></div>
    `;
    zone.addEventListener('dragover', onDragOver);
    zone.addEventListener('dragleave', onDragLeave);
    zone.addEventListener('drop',     onDrop);
    zone.addEventListener('click',    onZoneClick);
    wrap.appendChild(zone);
  });
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  DRAG & DROP
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let dragIdx = null;

function onDragStart(e){
  dragIdx = +e.currentTarget.dataset.index;
  e.currentTarget.classList.add('dragging');
  e.dataTransfer.effectAllowed = 'move';
}
function onDragEnd(e){
  e.currentTarget.classList.remove('dragging');
}
function onDragOver(e){
  e.preventDefault();
  e.currentTarget.classList.add('drag-over');
}
function onDragLeave(e){
  e.currentTarget.classList.remove('drag-over');
}
function onDrop(e){
  e.preventDefault();
  e.currentTarget.classList.remove('drag-over');
  if(dragIdx === null) return;
  const targetCatId = e.currentTarget.dataset.catId;
  processPlacement(dragIdx, targetCatId);
  dragIdx = null;
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  TAP / CLICK (mobile-friendly: select chip â†’ tap zone)
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let selectedIdx = null;

function onChipClick(e){
  e.stopPropagation();
  const idx = +e.currentTarget.dataset.index;
  if(placed.has(idx)) return;
  // deselect all
  document.querySelectorAll('.chip').forEach(c=>c.classList.remove('selected'));
  if(selectedIdx === idx){ selectedIdx = null; return; }
  selectedIdx = idx;
  e.currentTarget.classList.add('selected');
}
function onZoneClick(e){
  if(selectedIdx === null) return;
  const targetCatId = e.currentTarget.dataset.catId;
  processPlacement(selectedIdx, targetCatId);
  document.querySelectorAll('.chip').forEach(c=>c.classList.remove('selected'));
  selectedIdx = null;
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  CORE LOGIC
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function processPlacement(chipIdx, targetCatId){
  if(placed.has(chipIdx)) return;
  placed.add(chipIdx);
  const item = roundWords[chipIdx];
  const correct = (item.catId === targetCatId);

  // grey out chip
  const chip = document.querySelector(`.chip[data-index="${chipIdx}"]`);
  chip.classList.add('placed');
  chip.classList.remove('selected');

  // add dropped chip into zone
  const zone = document.querySelector(`.cat-zone[data-cat-id="${targetCatId}"]`);
  const container = zone.querySelector('.dropped-chips');
  const dc = document.createElement('span');
  dc.className = 'dropped-chip ' + (correct?'correct':'wrong');
  dc.textContent = item.word;
  container.appendChild(dc);

  // score
  if(correct){ scoreC++; } else { scoreW++; }
  updateScore();

  // check end
  if(placed.size === roundWords.length) setTimeout(endGame,600);
}

function updateScore(){
  document.getElementById('scoreCorrect').textContent = scoreC;
  document.getElementById('scoreWrong').textContent   = scoreW;
  document.getElementById('scoreTotal').textContent   = scoreC + scoreW;
  document.getElementById('progressFill').style.width = (placed.size / roundWords.length * 100) + '%';
}

function endGame(){
  const pct = Math.round(scoreC / roundWords.length * 100);
  document.getElementById('modalScore').textContent = pct + '%';
  let msg = '';
  if(pct === 100)      msg = 'Perfekt! Alle richtig! ðŸŒŸ';
  else if(pct >= 70)   msg = 'Sehr gut! Noch ein bisschen Ã¼ben und du schaffst es!';
  else if(pct >= 40)   msg = 'Nicht schlecht â€“ mit etwas Ãœbung wird es besser!';
  else                 msg = 'Lass dich nicht entmutigen â€“ versuche es noch einmal!';
  document.getElementById('modalMsg').textContent = msg;
  document.getElementById('modalOverlay').classList.add('show');
}

function restartGame(){
  document.getElementById('modalOverlay').classList.remove('show');
  scoreC = 0; scoreW = 0;
  placed = new Set();
  selectedIdx = null;
  dragIdx = null;
  buildRound();
  render();
  updateScore();
}

// â”€â”€â”€â”€ INIT â”€â”€â”€â”€
buildRound();
render();
updateScore();
</script>
</body>
</html>
